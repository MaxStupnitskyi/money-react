(this.webpackJsonpmoney=this.webpackJsonpmoney||[]).push([[0],{35:function(t,e,a){},36:function(t,e,a){},44:function(t,e,a){},45:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){"use strict";a.r(e);var n=a(2),s=a.n(n),c=a(28),i=a.n(c),r=a(26),o=a(15),l=a.n(o),d=a(19),u=a(4),h=a(17),j=a(6),b=a(7),p=a(9),v=a(8),g=a(13),m=a(3),f=(a(35),a(36),a(0)),O=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(j.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"header",children:Object(f.jsxs)("nav",{className:"nav",children:[Object(f.jsx)(g.b,{className:"nav__item",activeClassName:"selected",to:"/",exact:!0,children:"Today"}),Object(f.jsx)(g.b,{className:"nav__item",activeClassName:"selected",to:"/balance",children:"Balance"}),Object(f.jsx)(g.b,{className:"nav__item",activeClassName:"selected",to:"/budget",children:"Budget"}),Object(f.jsx)(g.b,{className:"nav__item",activeClassName:"selected",to:"/report",children:"Report"})]})})}}]),a}(s.a.Component),x=a(20),y=(a(43),a(44),new Date),_=(new Date).getTimezoneOffset(),S=y.getTime()-1e3*_*60,D=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={date:new Date(S).toISOString().slice(0,16),sum:"",category:t.props.categories.expences[0],account:t.props.accounts[0],type:"expences"},t}return Object(b.a)(a,[{key:"onAddedTransaction",value:function(t){t.preventDefault(),this.props.onAddedTransaction({cat:this.state.category,price:"expences"===this.state.type?Number(-"".concat(this.state.sum)):+this.state.sum,date:new Date(this.state.date).toISOString(),id:this.props.lastestID,account:this.state.account.id}),this.setState({sum:"",category:this.props.categories.expences[0],account:this.props.accounts[0],type:"expences"})}},{key:"changeType",value:function(t){this.setState({type:t.target.value,category:this.props.categories[t.target.value]&&this.props.categories[t.target.value][0]})}},{key:"render",value:function(){var t=this,e=this.props.categories[this.state.type]&&this.props.categories[this.state.type].map((function(t){return Object(f.jsx)("option",{value:t,children:t},t)})),a=this.props.accounts.map((function(t){return Object(f.jsx)("option",{value:t.title,children:t.title},t.title)}));return Object(f.jsxs)("div",{className:"add-expences",children:[Object(f.jsx)("h1",{className:"title",children:"New Transaction"}),this.props.accounts.length>0?Object(f.jsxs)("form",{onSubmit:function(e){return t.onAddedTransaction(e)},children:[Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Type:"}),Object(f.jsxs)("select",{className:"add-expences__input",value:this.state.type,onChange:function(e){return t.changeType(e)},children:[Object(f.jsx)("option",{value:"expences",children:"Expence"},"expences"),Object(f.jsx)("option",{value:"incomes",children:"Income"},"incomes")]})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Account:"}),Object(f.jsx)("select",{className:"add-expences__input",value:this.state.account.title,onChange:function(e){return t.setState({account:t.props.accounts.find((function(t){return t.title===e.target.value}))})},children:a})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Sum:"}),Object(f.jsx)("input",{required:!0,className:"add-expences__input",type:"text",value:this.state.sum,placeholder:"Enter the sum",onChange:function(e){"0"!==e.target.value.slice(0,1)&&e.target.value.match(/^[0-9]*\.?[0-9]{0,2}$/)&&t.setState({sum:e.target.value})}})]}),"transfer"!==this.state.type&&Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Category:"}),Object(f.jsx)("select",{className:"add-expences__input",value:this.state.category,onChange:function(e){return t.setState({category:e.target.value})},children:e})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Date:"}),Object(f.jsx)("input",{className:"add-expences__input",type:"datetime-local",value:this.state.date,onChange:function(e){return t.setState({date:e.target.value})}})]}),Object(f.jsx)("button",{className:"button add-expences__button",children:"Add"})]}):Object(f.jsx)("div",{children:"Please, create new account"})]})}}]),a}(s.a.Component),w=(a(45),(new Date).getTimezoneOffset()),N=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).transaction=[],t.state={edit:null,editAccount:"",editSum:"",editCategory:"",editDate:""},t.showPopover=function(e,a){var n=new Date(a.date).getTime()-1e3*w*60;e.currentTarget.contains(e.target)&&!e.target.closest(".transactions__popover")&&t.setState({edit:a.id,editAccount:a.account,editSum:Math.abs(a.price),editCategory:a.cat,editDate:new Date(n).toISOString().slice(0,16)})},t.hidePopover=function(e){!t.state.edit&&0!==t.state.edit||t.transaction.map((function(t){return null===t||void 0===t?void 0:t.contains(e.target)})).includes(!0)||t.setState({edit:null})},t}return Object(b.a)(a,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.hidePopover)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.hidePopover)}},{key:"filteredTransactions",value:function(t){var e=this;switch(this.props.filter){case"date":return t.filter((function(t){var a,n=new Date(t.date).setHours(0,0,0,0);return new Date(n).toISOString()===(null===(a=e.props.selectedDate)||void 0===a?void 0:a.toISOString())})).sort((function(t,e){return new Date(e.date)-new Date(t.date)}));case"acc":return t.filter((function(t){return t.account===e.props.filterAcc})).sort((function(t,e){return new Date(e.date)-new Date(t.date)}));default:return t.sort((function(t,e){return new Date(e.date)-new Date(t.date)}))}}},{key:"showedTransactions",value:function(t){var e=this;return t.filter((function(t){return t.date>=e.props.activeStartDate&&t.date<new Date(e.props.activeEndDate).toISOString()}))}},{key:"render",value:function(){var t=this,e=this.showedTransactions(this.filteredTransactions(this.props.transactions)),a={month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},n=e.map((function(e){var n=Object(f.jsxs)("div",{className:"transactions__popover".concat(t.state.edit===e.id?" visible":""),children:[Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Account:"}),Object(f.jsx)("select",{className:"add-expences__input",value:t.state.editAccount,onChange:function(e){return t.setState({editAccount:t.props.accounts.find((function(t){return t.id===+e.target.value})).id})},children:t.props.accounts.map((function(t){return Object(f.jsx)("option",{value:t.id,children:t.title},t.id)}))})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Sum:"}),Object(f.jsx)("input",{className:"add-expences__input",type:"text",value:t.state.editSum,placeholder:"Enter the sum",onChange:function(e){"0"!==e.target.value.slice(0,1)&&e.target.value.match(/^[0-9]*\.?[0-9]{0,2}$/)&&t.setState({editSum:e.target.value})}})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Category:"}),Object(f.jsx)("select",{className:"add-expences__input",value:t.state.editCategory,onChange:function(e){return t.setState({editCategory:e.target.value})},children:t.props.categories["".concat(e.price>0?"incomes":"expences")].map((function(t){return Object(f.jsx)("option",{value:t,children:t},t)}))})]}),Object(f.jsxs)("div",{className:"add-expences__item",children:[Object(f.jsx)("label",{className:"add-expences__label",children:"Date:"}),Object(f.jsx)("input",{className:"add-expences__input",type:"datetime-local",value:t.state.editDate,onChange:function(e){return t.setState({editDate:e.target.value})}})]}),Object(f.jsx)("button",{onClick:function(){t.props.onEditTransaction([t.state.edit,t.state.editAccount,t.state.editSum,t.state.editCategory,t.state.editDate]),t.setState({edit:null})},className:"button transactions__popover__button",children:"Save Changes"}),Object(f.jsx)("button",{onClick:function(){t.props.onEditTransaction([t.state.edit,t.state.editAccount,t.state.editSum,t.state.editCategory,t.state.editDate,!0]),t.setState({edit:null})},className:"button transactions__popover__button danger",children:"Delete"})]});return Object(f.jsxs)("div",{ref:function(a){return t.transaction[e.id]=a},onClick:function(a){return t.showPopover(a,e)},className:"transactions__item",children:[Object(f.jsxs)("div",{className:"transactions__item__main",children:[Object(f.jsx)("div",{className:"transactions__item__cat",children:e.cat}),Object(f.jsx)("div",{className:"transactions__item__date",children:new Date(e.date).toLocaleString(window.navigator.language,a)})]}),Object(f.jsx)("div",{className:"transactions__item__price ".concat(e.price>0?"income":"expence"),children:String(e.price).includes(".")?Math.abs(e.price).toFixed(2):Math.abs(e.price)}),n]},e.id)}));return Object(f.jsx)("div",{className:"transactions",children:n.length>0?n:Object(f.jsx)("h4",{className:"transactions__none",children:"You don't have any transactions yet"})})}}]),a}(s.a.Component),C=(a(46),new Date((new Date).setDate(1)).toISOString()),T=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={selectedDate:null,filter:null,activeStartDate:C,activeEndDate:new Date(new Date(C).setMonth(new Date(C).getMonth()+1)).toISOString()},t}return Object(b.a)(a,[{key:"onChangeDate",value:function(t){this.setState({selectedDate:t})}},{key:"onSelectDay",value:function(t,e){e.currentTarget.classList.contains("react-calendar__tile--active")?(this.setState({filter:null}),e.currentTarget.classList.remove("react-calendar__tile--active")):(e.currentTarget.classList.add("react-calendar__tile--active"),this.setState({filter:"date"}))}},{key:"changeMonth",value:function(t){var e=new Date(t).setMonth(t.getMonth()+1);this.setState({activeStartDate:new Date(t).toISOString(),activeEndDate:new Date(e).toISOString(),filter:null})}},{key:"markActiveDays",value:function(t,e){var a=new Set;return this.props.transactions.forEach((function(t){a.add(new Date(t.date).setHours(0,0,0,0))})),"month"===e&&Array.from(a).map((function(e){return new Date(t).getTime()===new Date(new Date(e)).getTime()?Object(f.jsx)("div",{className:"mark"},t):null}))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("transactions",JSON.stringify(this.props.transactions)),localStorage.setItem("accounts",JSON.stringify(this.props.accounts))}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:"today",children:[Object(f.jsx)(x.a,{minDetail:"year",showNeighboringMonth:!1,onChange:function(e){return t.onChangeDate(e)},onClickDay:function(e,a){return t.onSelectDay(e,a)},value:this.state.selectedDate,onActiveStartDateChange:function(e){var a=e.activeStartDate;return t.changeMonth(a)},tileContent:function(e){var a=e.date,n=e.view;return t.markActiveDays(a,n)}}),Object(f.jsxs)("div",{className:"today__transactions",children:[Object(f.jsx)("h1",{className:"title",children:"Transactions"}),Object(f.jsx)(N,{activeStartDate:this.state.activeStartDate,activeEndDate:this.state.activeEndDate,transactions:this.props.transactions,filter:this.state.filter,selectedDate:this.state.selectedDate,accounts:this.props.accounts,categories:this.props.categories,onEditTransaction:this.props.onEditTransaction})]}),Object(f.jsx)(D,{onAddedTransaction:this.props.onAddedTransaction,categories:this.props.categories,accounts:this.props.accounts,lastestID:this.props.lastestID})]})}}]),a}(s.a.Component),k=(a(47),(new Date).setDate(1)),A=new Date(k).getTimezoneOffset()/60;k=new Date(k).setHours(-A,0,0,0);var E=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={showEdit:!1,title:"",balance:"",activeStartDate:new Date(k).toISOString(),activeEndDate:(new Date).toISOString(),filter:null,filterAcc:null,deleteAccount:!1,deletedAccount:null,showError:"hidden"},t}return Object(b.a)(a,[{key:"onAccountAdded",value:function(){var t=Object(d.a)(l.a.mark((function t(e){var a,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this.props.accounts.find((function(t){return t.title===n.state.title}));case 3:a=t.sent,this.setState({showError:a?"":"hidden"}),""!==this.state.showError&&(this.props.onAccountAdded({title:this.state.title,balance:this.state.balance}),this.setState({title:"",balance:"",showError:"hidden"}));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){localStorage.setItem("accounts",JSON.stringify(this.props.accounts)),localStorage.setItem("transactions",JSON.stringify(this.props.transactions))}},{key:"confirmAccountDelete",value:function(t,e){t.stopPropagation(),this.setState({deleteAccount:!0,deletedAccount:e})}},{key:"render",value:function(){var t=this,e=this.props.accounts.map((function(e){return Object(f.jsxs)("div",{onClick:function(){return t.setState((function(t){return{filter:null!==t.filter&&t.filterAcc===e.id?null:"acc",filterAcc:t.filterAcc===e.id?null:e.id}}))},className:"account",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"account__title",children:e.title}),Object(f.jsx)("div",{className:"account__balance",children:String(e.balance).includes(".")?Number(e.balance).toFixed(2):e.balance})]}),Object(f.jsxs)("div",{children:[e.id===t.state.filterAcc?"\u2713  ":"",t.state.showEdit&&Object(f.jsx)("button",{className:"account__delete",onClick:function(a){return t.confirmAccountDelete(a,e.id)},children:"-"})]})]},e.title)}));return Object(f.jsxs)("div",{className:"balance",children:[Object(f.jsxs)("div",{className:"balance__accounts",children:[Object(f.jsx)("h1",{className:"title",children:"Accounts"}),e,Object(f.jsx)("button",{className:"button edit",onClick:function(){return t.setState({showEdit:!t.state.showEdit})},children:this.state.showEdit?"Done":"Edit"}),this.state.showEdit&&Object(f.jsxs)("form",{className:"add-account",onSubmit:function(e){return t.onAccountAdded(e)},children:[Object(f.jsx)("label",{className:"add-account__title",children:"Create new Account"}),Object(f.jsx)("input",{type:"text",placeholder:"Title",autoFocus:!0,required:!0,value:this.state.title,onChange:function(e){return t.setState({title:e.target.value})}}),Object(f.jsx)("div",{className:"error-msg ".concat(this.state.showError),children:"Please, use unique name for account"}),Object(f.jsx)("input",{type:"text",required:!0,placeholder:"Balance",value:this.state.balance,onChange:function(e){e.target.value.match(/^[0-9]*\.?[0-9]{0,2}$/)&&t.setState({balance:e.target.value})}}),Object(f.jsx)("button",{className:"button",children:"Add"})]})]}),Object(f.jsxs)("div",{className:"balance__transactions",children:[Object(f.jsxs)("div",{className:"transactions__filter",children:[Object(f.jsx)("input",{type:"date",value:this.state.activeStartDate.slice(0,10),onChange:function(e){t.setState({activeStartDate:new Date(e.target.value).toISOString()})}}),Object(f.jsx)("span",{children:"\u2014"}),Object(f.jsx)("input",{type:"date",value:this.state.activeEndDate.slice(0,10),min:this.state.activeStartDate.slice(0,10),onChange:function(e){t.setState({activeEndDate:new Date(e.target.value).toISOString()})}})]}),Object(f.jsx)(N,{activeStartDate:this.state.activeStartDate,activeEndDate:this.state.activeEndDate,transactions:this.props.transactions,filter:this.state.filter,filterAcc:this.state.filterAcc,onEditTransaction:this.props.onEditTransaction,accounts:this.props.accounts,categories:this.props.categories})]}),this.state.deleteAccount&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"overlay",onClick:function(){return t.setState({deleteAccount:!1})}}),Object(f.jsxs)("div",{className:"modal deleteAccount",children:[Object(f.jsx)("h3",{className:"modal__title",children:"Are you sure you want to delete account? All account transactions will be deleted too"}),Object(f.jsxs)("div",{className:"modal__buttons",children:[Object(f.jsx)("button",{onClick:function(){t.props.deleteAccount(t.state.deletedAccount),t.setState({deleteAccount:!1})},className:"button modal__button danger",children:"Delete account"}),Object(f.jsx)("button",{className:"button modal__button",onClick:function(){return t.setState({deleteAccount:!1})},children:"Cancel"})]})]})]})]})}}]),a}(s.a.Component),I=(a(48),new Date((new Date).setDate(1)).toISOString()),M=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={activeStartDate:I,activeEndDate:new Date(new Date(I).setMonth(new Date(I).getMonth()+1)).toISOString(),filter:null,showedTransactions:[],activeCategory:null,showEdit:!1},t}return Object(b.a)(a,[{key:"filterTransactions",value:function(t){var e=this,a=this.props.categories[t].map((function(a){var n=e.props.transactions.filter((function(t){return t.cat===a&&t.date>=e.state.activeStartDate&&t.date<e.state.activeEndDate})),s=n.length>0?n.reduce((function(t,e){return t+Math.abs(e.price)}),0):0,c=Object(f.jsxs)("div",{className:"category__wrap",total:s,children:[Object(f.jsxs)("button",{className:"category".concat(e.state.activeCategory===a?" active":"").concat(e.state.showEdit?" editable":""),onClick:function(){e.showTransactions(n),e.setState({activeCategory:a})},children:[Object(f.jsx)("div",{className:"category__title",children:a}),Object(f.jsx)("div",{className:"category__total",children:String(s).includes(".")?s.toFixed(2):s})]}),e.state.showEdit&&Object(f.jsx)("button",{className:"delete-category",onClick:function(){return e.props.deleteCategory([t,a,s])},children:"-"})]},a);return(e.state.showEdit||n.length>0)&&c})).filter((function(t){return!1!==t})).sort((function(t,e){return e.props.total-t.props.total})),n=a.reduce((function(t,e){return t+e.props.total}),0).toFixed(2);return{html:a,monthTotal:n}}},{key:"showTransactions",value:function(t){this.setState({showedTransactions:t})}},{key:"changeMonth",value:function(t){var e=new Date(t).setMonth(t.getMonth()+1);this.setState({activeStartDate:new Date(t).toISOString(),activeEndDate:new Date(e).toISOString(),showedTransactions:[],activeCategory:null})}},{key:"toggleCategories",value:function(){this.setState((function(t){return{showEdit:!t.showEdit}}))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("accounts",JSON.stringify(this.props.accounts)),localStorage.setItem("transactions",JSON.stringify(this.props.transactions))}},{key:"render",value:function(){var t=this,e=this.filterTransactions("expences"),a=this.filterTransactions("incomes");return Object(f.jsxs)("div",{className:"budget",children:[Object(f.jsx)("div",{className:"calendar",children:Object(f.jsx)(x.a,{minDetail:"month",onActiveStartDateChange:function(e){var a=e.activeStartDate;return t.changeMonth(a)}})}),Object(f.jsx)("button",{className:"button edit",onClick:function(){return t.toggleCategories()},children:this.state.showEdit?"Done":"Edit"}),Object(f.jsxs)("div",{className:"budget__content",children:[Object(f.jsxs)("div",{className:"budget__categories",style:this.state.showedTransactions.length>0?{flexBasis:"60%"}:{flexBasis:"100%"},children:[Object(f.jsxs)("div",{className:"budget__category expences",children:[Object(f.jsxs)("div",{className:"budget__category__header",children:[Object(f.jsx)("h1",{className:"title",children:"Expences"}),Object(f.jsx)("div",{className:"total",children:e.monthTotal})]}),Object(f.jsxs)("div",{className:"categories",children:[e.html,this.state.showEdit&&Object(f.jsx)("button",{onClick:function(){return t.props.onCategoryAdded("expence")},className:"category",children:"Add Category"})]})]}),Object(f.jsxs)("div",{className:"budget__category incomes",children:[Object(f.jsxs)("div",{className:"budget__category__header",children:[Object(f.jsx)("h1",{className:"title",children:"Incomes"}),Object(f.jsx)("div",{className:"total",children:a.monthTotal})]}),Object(f.jsxs)("div",{className:"categories",children:[a.html,this.state.showEdit&&Object(f.jsx)("button",{onClick:function(){return t.props.onCategoryAdded("income")},className:"category",children:"Add Category"})]})]}),Object(f.jsxs)("div",{className:"budget__footer",children:[Object(f.jsx)("h1",{className:"title",children:"Balance:"}),Object(f.jsx)("div",{className:"total",children:(a.monthTotal-e.monthTotal).toFixed(2)})]})]}),Object(f.jsx)("div",{className:"budget__transactions",style:this.state.showedTransactions.length>0?{flexBasis:"40%",display:"block"}:{display:"none"},children:Object(f.jsx)(N,{transactions:this.state.showedTransactions,activeStartDate:this.state.activeStartDate,activeEndDate:this.state.activeEndDate,onEditTransaction:this.props.onEditTransaction,accounts:this.props.accounts,categories:this.props.categories})})]})]})}}]),a}(s.a.Component),F=(a(49),a.p+"static/media/angle.e6dc94b0.svg"),J=(new Date).setDate(1),P=new Date(J).getTimezoneOffset()/60;J=new Date(J).setHours(-P,0,0,0);var B=0;function H(t){var e=t.value,a=t.title,n=t.width,s=t.onSelected;return Object(f.jsxs)("button",{onClick:s,className:"report__block ".concat(a.toLowerCase()),style:{width:"".concat(n,"%")},children:[Object(f.jsx)("div",{children:a})," ",Object(f.jsx)("div",{children:e})]})}var L=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={activeStartDate:new Date(J).toISOString(),activeEndDate:(new Date).toISOString(),showDetail:!1},t}return Object(b.a)(a,[{key:"showBudget",value:function(t){var e=this,a=this.props.transactions;return a=a.filter((function(t){return t.date>=e.state.activeStartDate&&t.date<new Date(e.state.activeEndDate).toISOString()})),"expences"===t?a.filter((function(t){return t.price<0})):a.filter((function(t){return t.price>0}))}},{key:"setDetail",value:function(t){!t.length>0||this.setState({showDetail:t[0].price>0?"incomes":"expences"})}},{key:"showDetail",value:function(t){var e=this,a={};t.forEach((function(t){a.hasOwnProperty(t.cat)?a[t.cat]+=Math.abs(t.price):a[t.cat]=Math.abs(t.price)}));var n=Object.entries(a).sort((function(t,e){return Math.abs(e[1])-Math.abs(t[1])})),s=n.map((function(t){var a=t[1]===n[0][1]?100:100*Math.abs(t[1])/Math.abs(n[0][1]);return Object(f.jsxs)("div",{className:"report__block ".concat("incomes"===e.state.showDetail?"incomes":"expences"),style:{width:"".concat(a,"%")},children:[Object(f.jsx)("div",{children:t[0]}),Object(f.jsx)("div",{children:String(t[1]).includes(".")?t[1].toFixed(2):t[1]})]},B++)}));return Object(f.jsx)("div",{children:s})}},{key:"backToOverall",value:function(){this.setState({showDetail:!1})}},{key:"render",value:function(){var t=this,e=this.showBudget("expences"),a=this.showBudget("incomes"),n=Number(e.reduce((function(t,e){return t+Math.abs(e.price)}),0).toFixed(2)),s=Number(a.reduce((function(t,e){return t+Math.abs(e.price)}),0).toFixed(2)),c=50,i=50;return s>n&&(c=100,i=100*n/s),s<n&&(c=100*s/n,i=100),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"transactions__filter",children:[Object(f.jsx)("input",{type:"date",value:this.state.activeStartDate.slice(0,10),onChange:function(e){t.setState({activeStartDate:new Date(e.target.value).toISOString()})}}),Object(f.jsx)("span",{children:"\u2014"}),Object(f.jsx)("input",{type:"date",value:this.state.activeEndDate.slice(0,10),min:this.state.activeStartDate.slice(0,10),onChange:function(e){t.setState({activeEndDate:new Date(new Date(e.target.value).setHours(23,59,59,999)).toISOString()})}})]}),Object(f.jsxs)("div",{className:"report__content",children:[!this.state.showDetail&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"incomes",children:Object(f.jsx)(H,{title:"Incomes",value:s,width:c||0,onSelected:function(){return t.setDetail(a)}})}),Object(f.jsx)("div",{className:"expences",children:Object(f.jsx)(H,{onSelected:function(){return t.setDetail(e)},title:"Expences",value:n,width:i||0})})]}),"incomes"===this.state.showDetail&&Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return t.backToOverall()},children:Object(f.jsx)("img",{src:F,alt:"back",style:{width:"10px"}})}),this.showDetail(a)]}),"expences"===this.state.showDetail&&Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return t.backToOverall()},children:Object(f.jsx)("img",{src:F,alt:"back",style:{width:"10px"}})}),this.showDetail(e)]})]})]})}}]),a}(s.a.Component),V=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={transactions:JSON.parse(localStorage.getItem("transactions"))||[],categories:JSON.parse(localStorage.getItem("categories"))||{expences:["Food","Travel","Health","Car","House","Gifts","Entertainment","Restaurants, cafe"],incomes:["Salary","Dividend","Gift"]},accounts:JSON.parse(localStorage.getItem("accounts"))||[{title:"Cash",balance:0,id:0}],addNewCategory:!1,newCategoryType:null,addCategoryValue:"",deleteCategory:!1,deletedCategory:null,moveTransactionsTo:null,showError:"hidden"},t}return Object(b.a)(a,[{key:"onAddedTransaction",value:function(t){this.setState((function(e){var a=t.account,n=e.accounts.findIndex((function(t){return t.id===a})),s=Object(h.a)({},e.accounts[n]);return s.balance=+s.balance+ +t.price,{transactions:[].concat(Object(u.a)(e.transactions),[t]),accounts:[].concat(Object(u.a)(e.accounts.slice(0,n)),[s],Object(u.a)(e.accounts.slice(n+1)))}}))}},{key:"onAccountAdded",value:function(t){this.setState((function(e){var a,n=e.accounts;return{accounts:[].concat(Object(u.a)(n),[{title:t.title,balance:t.balance,id:(null===(a=n.slice(-1)[0])||void 0===a?void 0:a.id)+1||0}])}}))}},{key:"onCategoryAdded",value:function(t){this.setState({addNewCategory:!0,newCategoryType:t})}},{key:"addCategory",value:function(){var t=Object(d.a)(l.a.mark((function t(e){var a,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this.state.categories["".concat(this.state.newCategoryType,"s")].find((function(t){return t===n.state.addCategoryValue}));case 3:a=t.sent,this.setState({showError:a?"":"hidden"}),""!==this.state.showError&&this.setState((function(t){var e=t.categories;return"income"===t.newCategoryType&&(e={expences:t.categories.expences,incomes:[].concat(Object(u.a)(t.categories.incomes),[t.addCategoryValue])}),"expence"===t.newCategoryType&&(e={expences:[].concat(Object(u.a)(t.categories.expences),[t.addCategoryValue]),incomes:t.categories.incomes}),localStorage.setItem("categories",JSON.stringify(e)),{categories:e,addNewCategory:!1,newCategoryType:null,addCategoryValue:""}}));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"generateID",value:function(){return this.state.transactions.length>0?this.state.transactions.length:0}},{key:"onCategoryDeleted",value:function(t){var e=this;this.setState((function(a){return{deleteCategory:!e.state.deleteCategory,deletedCategory:t,moveTransactionsTo:a.categories[t[0]][0]!==t[1]?a.categories[t[0]][0]:a.categories[t[0]][1]}}))}},{key:"deleteCategory",value:function(t,e,a){var n=this,s=Object(r.a)(e,2),c=s[0],i=s[1];t.preventDefault();var o=this.state.categories[c].findIndex((function(t){return t===i}));this.setState((function(t){var e=t.transactions,n=e.filter((function(t){return t.cat===i})).map((function(t){return Object(h.a)(Object(h.a)({},t),{},{cat:a})})),s=e.filter((function(t){return t.cat!==i})),r=[].concat(Object(u.a)(n),Object(u.a)(s));return{categories:"expences"===c?{expences:[].concat(Object(u.a)(t.categories.expences.slice(0,o)),Object(u.a)(t.categories.expences.slice(o+1))),incomes:t.categories.incomes}:{expences:t.categories.expences,incomes:[].concat(Object(u.a)(t.categories.incomes.slice(0,o)),Object(u.a)(t.categories.incomes.slice(o+1)))},transactions:r,deleteCategory:!1}}),(function(){localStorage.setItem("categories",JSON.stringify(n.state.categories)),localStorage.setItem("transactions",JSON.stringify(n.state.transactions))}))}},{key:"onEditTransaction",value:function(t){var e=Object(r.a)(t,6),a=e[0],n=e[1],s=e[2],c=e[3],i=e[4],o=e[5],l=void 0!==o&&o,d=this.state.transactions.findIndex((function(t){return t.id===a})),j={cat:c,price:this.state.transactions[d].price>0?+s:-s,date:i,id:a,account:n},b=this.state.accounts.findIndex((function(t){return t.id===n})),p=Object(h.a)({},this.state.accounts[b]);l&&(p.balance=p.balance-=this.state.transactions[d].price),l||(p.balance=this.state.transactions[d].price>0?p.balance+=this.state.transactions[d].price-s:p.balance-=this.state.transactions[d].price+ +s);var v=l?[].concat(Object(u.a)(this.state.transactions.slice(0,d)),Object(u.a)(this.state.transactions.slice(d+1))):[].concat(Object(u.a)(this.state.transactions.slice(0,d)),[j],Object(u.a)(this.state.transactions.slice(d+1)));this.setState((function(t){var e=t.accounts;return{transactions:v,accounts:[].concat(Object(u.a)(e.slice(0,b)),[p],Object(u.a)(e.slice(b+1)))}}))}},{key:"deleteAccount",value:function(t){var e=this.state.accounts.findIndex((function(e){return e.id===t})),a=this.state.transactions.slice(0).filter((function(e){return e.account!==t}));this.setState((function(t){var n=t.accounts;return{accounts:[].concat(Object(u.a)(n.slice(0,e)),Object(u.a)(n.slice(e+1))),transactions:a}}))}},{key:"render",value:function(){var t=this,e=this.generateID();return Object(f.jsx)(g.a,{basename:"money-react",children:Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(O,{}),Object(f.jsxs)(m.c,{children:[Object(f.jsx)(m.a,{path:"/",exact:!0,children:Object(f.jsx)(T,{transactions:this.state.transactions,categories:this.state.categories,accounts:this.state.accounts,onAddedTransaction:function(e){return t.onAddedTransaction(e)},lastestID:e,onEditTransaction:function(e){return t.onEditTransaction(e)}})}),Object(f.jsx)(m.a,{path:"/balance",children:Object(f.jsx)(E,{accounts:this.state.accounts,onAccountAdded:function(e){return t.onAccountAdded(e)},transactions:this.state.transactions,categories:this.state.categories,onEditTransaction:function(e){return t.onEditTransaction(e)},deleteAccount:function(e){return t.deleteAccount(e)}})}),Object(f.jsx)(m.a,{path:"/budget",children:Object(f.jsx)(M,{onCategoryAdded:function(e){return t.onCategoryAdded(e)},categories:this.state.categories,transactions:this.state.transactions,deleteCategory:function(e){return t.onCategoryDeleted(e)},accounts:this.state.accounts,onEditTransaction:function(e){return t.onEditTransaction(e)}})}),Object(f.jsx)(m.a,{path:"/report",children:Object(f.jsx)(L,{transactions:this.state.transactions})})]}),this.state.addNewCategory&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"overlay",onClick:function(){return t.setState({addNewCategory:!1})}}),Object(f.jsxs)("div",{className:"modal newCategory",children:[Object(f.jsx)("h3",{className:"modal__title",children:"Please, enter the name of the category"}),Object(f.jsxs)("form",{className:"modal__form",onSubmit:function(e){return t.addCategory(e)},children:[Object(f.jsx)("input",{type:"text",placeholder:"Type new category name",value:this.state.addCategoryValue,onChange:function(e){return t.setState({addCategoryValue:e.target.value})}}),Object(f.jsx)("div",{className:"error-msg ".concat(this.state.showError),children:"Please, use unique name for category"}),Object(f.jsx)("button",{type:"submit",className:"button modal__button",children:"Add"})]})]})]}),this.state.deleteCategory&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"overlay",onClick:function(){return t.setState({deleteCategory:!1})}}),Object(f.jsx)("div",{className:"modal deleteCategory",children:this.state.categories[this.state.deletedCategory[0]].length<=1?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{className:"modal__title",children:"You can't delete your last category"}),Object(f.jsx)("div",{className:"modal__buttons",children:Object(f.jsx)("button",{onClick:function(){return t.setState({deleteCategory:!1})},className:"button modal__button",children:"Got it"})})]}):Object(f.jsxs)("form",{className:"modal__form",onSubmit:function(e){return t.deleteCategory(e,t.state.deletedCategory,t.state.moveTransactionsTo)},children:[0===this.state.deletedCategory[2]?Object(f.jsx)("h3",{className:"modal__title",children:"Are you sure you want to delete category?"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{className:"modal__title",children:"Please, select category for moving transactions"}),Object(f.jsx)("select",{onChange:function(e){return t.setState({moveTransactionsTo:e.target.value})},children:this.state.categories[this.state.deletedCategory[0]].filter((function(e){return e!==t.state.deletedCategory[1]})).map((function(t){return Object(f.jsx)("option",{value:t,children:t},t)}))})]}),Object(f.jsxs)("div",{className:"modal__buttons",children:[Object(f.jsx)("button",{disabled:this.state.categories[this.state.deletedCategory[0]].length<=1,type:"submit",className:"button danger",children:"Delete category"}),Object(f.jsx)("button",{type:"button",className:"button",onClick:function(){return t.setState({deleteCategory:!1})},children:"Cancel"})]})]})})]})]})})}}]),a}(s.a.Component);i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.6edab85f.chunk.js.map